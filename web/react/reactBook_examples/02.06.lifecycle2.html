<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>States</title>
</head>
<body>
  <div id="app"></div>
  <script src="react/build/react.js"></script>
  <script src="react/build/react-dom.js"></script>
  <script>
  // uses life cycle (logMixin) to listen to changes in components
  var logMixin = {

    _log : function(methodName,args){
      console.log(this.name + '::' + methodName, args);
    },

    //executed before render method is called
    componentWillUpdate : function() {
      this._log('componentWillUpdate', arguments)
    },

    //executed after render method is called
    componentDidUpdate : function() {
      this._log('componentDidUpdate', arguments)
    },

    //executed before node mounts
    componentWillMount : function() {
      this._log('componentWillMount', arguments)
    },

    //executed after the node mounts
    componentDidMount : function() {
      this._log('componentDidMount', arguments)
    },

    //executed before the node unmounts
    componentWillUnmount : function() {
      this._log('componentWillUnmount', arguments)
    },
  };
  var TextAreaCounter = React.createClass({
    name:'TextAreaCounter',
    mixins : [logMixin],

    propTypes: {
      text: React.PropTypes.string,
    },

    getDefaultProps: function() {
      return {
        text: '',
      };
    },

    getInitialState: function() {
      return {
        text: this.props.text,
      };
    },

    _textChange: function(ev) {
      this.setState({
        text: ev.target.value,
      });
    },

    render: function() {
      return React.DOM.div(null,
        React.DOM.textarea({
          value: this.state.text,
          onChange: this._textChange,
        }),
        React.DOM.h3(null, this.state.text.length)
      );
    }
  });

  //make this a variable to access from outside
  var myTextAreaCounter = ReactDOM.render(
    React.createElement(TextAreaCounter,{
      text: "Bob"
    }),
    document.getElementById("app")
  );

   //with this you can set states from outside(console) like
   //myTextAreaCounter.setState({text: "Hello outside world!"});

   //also test arguements and grab parent DOM nodes
   //var reactAppNode = ReactDOM.findDOMNode(myTextAreaCounter);
   //reactAppNode.parentNode === document.getElementById('app');

   //access properties and states by using this
   //myTextAreaCounter.props;
   //myTextAreaCounter.state;

   //This works but might cause problems down the road
   //myTextAreaCounter.setState({text: 'NOOOO'});

  </script>
</body>
</html>
